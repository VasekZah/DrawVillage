// Databáze pro veškerou pixel-artovou grafiku

// Barevná paleta použitá ve hře
const PALETTE = {
    'T': 'transparent',    // Průhledná
    'BL': '#1a202c',       // Černá (obrysy)
    
    // Osadník (šedá šablona)
    'H': '#f1f5f9',        // Hlava
    'S': '#94a3b8',        // Tělo (košile)
    'P': '#475569',        // Kalhoty (pants)

    // Příroda
    'TR': '#581c0d',       // Kmen stromu (trunk)
    'L': '#15803d',        // Listí
    'dL': '#166534',       // Tmavé listí
    'ST': '#a1a1aa',       // Kámen
    'dST': '#71717a',      // Tmavý kámen
    'BE': '#dc2626',       // Bobule (berry)

    // Suroviny
    'W': '#a16207',        // Dřevo (wood)
    'F': '#facc15',        // Jídlo (food)

    // Budovy
    'wW': '#d4a15a',       // Stěna (wall wood)
    'wR': '#7f1d1d',       // Střecha (wall roof)
};

// Mapy jednotlivých spritů
export const SPRITE_DATA = {
    // Postavy
    settler: [
        '................',
        '.......HH.......',
        '......HHHH......',
        '.......HH.......',
        '......SSSS......',
        '.....SSBLSS.....',
        '......SBLS......',
        '......SSSS......',
        '......PBLP......',
        '......PBLP......',
        '.....PP..PP.....',
        '....PP....PP....',
        '................',
        '................',
        '................',
        '................',
    ],
    child: [
        '................',
        '................',
        '................',
        '.......HH.......',
        '......HHHH......',
        '.......HH.......',
        '......SSSS......',
        '.....SSBLSS.....',
        '......PBLP......',
        '.....PP..PP.....',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],

    // Svět
    tree: [
        '................',
        '......LLLL......',
        '....LLdLdLLL....',
        '...LLdLddLLdLL..',
        '..LLdLLLLdLdLL..',
        '..LdLLdLdLLdLL..',
        '..LLdLLdLLdLL...',
        '...LLLLLLLLdLL..',
        '....LLLLLLLL....',
        '......TRTR......',
        '......TRTR......',
        '......TRTR......',
        '.....TRTRTR.....',
        '................',
        '................',
        '................',
    ],
    stone: [
        '................',
        '................',
        '................',
        '......STST......',
        '....STdSTSTST...',
        '...STdSTSTdSTST.',
        '..STSTdSTSTdST..',
        '.STdSTSTdSTST...',
        '..STdSTSTdSTST..',
        '...STSTSTdST....',
        '....STdSTST.....',
        '......ST........',
        '................',
        '................',
        '................',
        '................',
    ],
     berryBush: [
        '................',
        '................',
        '................',
        '................',
        '......LLLL......',
        '....LLdLdLLL....',
        '...LBLLddLBERL..',
        '..LLdLLBLLdLdLL..',
        '..LdLLdBERdLLdLL..',
        '..BERdLLdLLdLBE...',
        '...LLLLLLLLdLL..',
        '....LLLLLLLL....',
        '................',
        '................',
        '................',
        '................',
    ],
    sapling: [
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '.......L........',
        '......LLL.......',
        '.....LLdLL......',
        '.......TR.......',
        '.......TR.......',
        '......TRTR......',
        '................',
        '................',
        '................',
        '................',
    ],
    
    // Hromádky surovin
    wood_pile: [
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '..W.W.W.W.......',
        '.W.W.W.W.W......',
        '..W.W.W.W.W.W...',
        '.W.W.W.W.W.W.W..',
        'W.W.W.W.W.W.W.W.',
        '................',
        '................',
    ],
    stone_pile: [
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '.....ST.........',
        '....STdST.......',
        '..STdSTSTST.....',
        '.STSTdSTdSTST...',
        '................',
        '................',
    ],
    food_pile: [
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '.......F........',
        '......F.F.......',
        '.....F.F.F.F....',
        '....F.F.F.F.F...',
        '................',
        '................',
    ],
    
    // Nošené suroviny
    wood_carry: [
        '................',
        '................',
        '................',
        '................',
        '......W.W.......',
        '.....W.W.W......',
        '......W.W.......',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],
     stone_carry: [
        '................',
        '................',
        '................',
        '................',
        '......STST......',
        '....STdSTST.....',
        '.....STdST......',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],
     food_carry: [
        '................',
        '................',
        '................',
        '................',
        '.......FF.......',
        '......F.FF......',
        '.......FF.......',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],

    // Budovy a UI ikony (použijeme data z herních spritů)
    hut: [
        '................',
        '........wR......',
        '.......wRwR.....',
        '......wRwRwR....',
        '.....wRwRwRwR...',
        '....wRwRwRwRwR..',
        '.....wWwWwW.....',
        '.....wWBLwW.....',
        '.....wWwWwW.....',
        '.....wWBLwW.....',
        '.....wWwWwW.....',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],
    stockpile: [
        '................',
        '................',
        '..W.W....ST.....',
        '.W.W.W..STdST...',
        '..W.W..STdSTST..',
        '.......STST.....',
        '................',
        '..F.............',
        '.F.F.F..........',
        '..F.F.F.F.......',
        '................',
        '................',
        '................',
        '................',
        '................',
        '................',
    ],
    // Další budovy a ikony se dají přidat stejným způsobem
};

// --- Pomocná funkce pro generování plátna z dat ---
export function generateSprite(spriteName) {
    const data = SPRITE_DATA[spriteName];
    if (!data) return null;

    const canvas = document.createElement('canvas');
    const width = data[0].length;
    const height = data.length;
    canvas.width = width;
    canvas.height = height;
    const ctx = canvas.getContext('2d');
    
    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            const char = data[y][x];
            const color = PALETTE[char];
            if (color && color !== 'transparent') {
                ctx.fillStyle = color;
                ctx.fillRect(x, y, 1, 1);
            }
        }
    }
    return canvas;
}
